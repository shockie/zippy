<html>
	<head>
		<title></title>
		<script type="text/javascript" src="../lib/zepto.js"></script>
		<script type="text/javascript" src="../lib/mustache.js"></script>
		<script type="text/javascript" src="../zippy.js"></script>
		<script type="text/javascript">
			Zippy.Ajax = {
				get: function(url,cb){
					$.get(url,cb);
				}
			};
			Zippy.Template = {
				render: function(template, data){
					return Mustache.to_html(template, data);
				}
			};
		</script>
		<script type="text/javascript" src="../lang/class.js"></script>
		<script type="text/javascript" src="../lang/function.js"></script>
		<script type="text/javascript" src="../mvc/event.js"></script>
		<script type="text/javascript" src="../mvc/model.js"></script>
		<script type="text/javascript" src="../mvc/view.js"></script>
		<script type="text/javascript" src="../mvc/window.js"></script>
		<script type="text/javascript" src="../mvc/controller.js"></script>
		<script type="text/javascript" src="../mvc/router.js"></script>
		<script type="text/javascript" src="../mvc/app.js"></script>
		<script type="text/javascript">
		$(document).ready(function(){
			app = new Zippy.App({
				template: 'static/templates/base.mustache',
				context: '#main',
				views: [
					{ 
						view: new Zippy.View('header', 'static/templates/header.mustache'),
						data: {title : 'Zippy Example'}
					},
					{ 
						view: new Zippy.View('footer', 'static/templates/footer.mustache')
					}
				]
			});
			app.setControllers({
				'/hello': new Zippy.Controller({
					construct:function(){
						this._window.setTitle('Hello World!');
						this.update('<a href="#/test">go to test</a>');
						$(this._view.getContext()).delegate('a', 'click', function(event){
							if(this._view.getContext().css('background-color') == 'red'){
								this._view.getContext().css('background-color', 'blue');
							}else{
								this._view.getContext().css('background-color', 'red');
							}
							
							event.preventDefault();
						}.bind(this));
					},
					destruct: function(container){
						console.log('goodbye');
						$(this._view.getContext()).unbind('click');
						this.update('');
					}
				})
			});
			app.listen();
		});
		</script>
	</head>
	<body>
	</body>
</html>
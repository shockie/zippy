<html>
	<head>
		<script type="text/javascript" src="../lib/zepto.js"></script>
		<script type="text/javascript" src="../lib/mustache.js"></script>
		<script type="text/javascript">
			var Zippy = function Zippy(){};
			Zippy.Ajax = {
				get: function(url,cb){
					$.get(url,cb);
				}
			};
			Zippy.Template = {
				render: function(template, data){
					return Mustache.to_html(template, data);
				}
			};
		</script>
		<script type="text/javascript" src="../lang/class.js"></script>
		<script type="text/javascript" src="../lang/function.js"></script>
		<script type="text/javascript" src="../mvc/event.js"></script>
		<script type="text/javascript" src="../mvc/model.js"></script>
		<script type="text/javascript" src="../mvc/view.js"></script>
		<script type="text/javascript" src="../mvc/controller.js"></script>
		<script type="text/javascript" src="../mvc/router.js"></script>
		<script type="text/javascript" src="../mvc/app.js"></script>
		<script type="text/javascript">
			document.addEventListener("DOMContentLoaded",function(){
				var HelloController = new Zippy.Controller({
					onLock: function(){
						console.log('locked on position, /hello');
					},
					respond: function(){
						this._app.getView('header').display({title: '/hello'});
						console.log('w00t got called, /hello');
					},
					destruct: function(){
						console.log('sorry, have to go!, /hello');
					}
				});
				var TestController = new Zippy.Controller({
					onLock: function(){
						console.log('locked on position, /test');
					},
					respond: function(){
						this._app.getView('header').display({title: '/test'});
					},
					destruct: function(){
						console.log('sorry, have to go!, /test');
					}
				});
				app = new Zippy.App(null, {
					'layout': {
						'template': 'static/templates/base.mustache',
						'context': '#main',
						'views': {
							'global': [
								{
									'view': new Zippy.View('header','static/templates/header.mustache'),
									'data': {
										'title': 'Zippy'
									}
								},
								{
									'view': new Zippy.View('footer','static/templates/footer.mustache')
								}
							]
						}
					}
				});
				app.listen(new Zippy.Router({
					'/hello': HelloController,
					'/test' : TestController
				}));
			}, false );
		</script>
	</head>
	<body>
	</body>
</html>
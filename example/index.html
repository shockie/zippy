<html>
	<head>
		<title></title>
		<script type="text/javascript" src="../lib/zepto.js"></script>
		<script type="text/javascript" src="../lib/mustache.js"></script>
		<script type="text/javascript" src="../zippy.js"></script>
		<script type="text/javascript">
			Zippy.Ajax = {
				get: function(url,cb){
					$.get(url,cb);
				}
			};
			Zippy.Template = {
				render: function(template, data){
					return Mustache.to_html(template, data);
				}
			};
		</script>
		<script type="text/javascript" src="../lang/class.js"></script>
		<script type="text/javascript" src="../lang/function.js"></script>
		<script type="text/javascript" src="../mvc/event.js"></script>
		<script type="text/javascript" src="../mvc/model.js"></script>
		<script type="text/javascript" src="../mvc/view.js"></script>
		<script type="text/javascript" src="../mvc/window.js"></script>
		<script type="text/javascript" src="../mvc/controller.js"></script>
		<script type="text/javascript" src="../mvc/router.js"></script>
		<script type="text/javascript" src="../mvc/app.js"></script>
		<script type="text/javascript">
		$(document).ready(function(){
			var HelloController = new Zippy.Controller({
				onLoad: function(){
				},
				listen: function(){
					$('a').live('click', function(){
						console.log('clicked');
					});
				},
				respond: function(){
					this._window._head.update('title', 'Hello');
					this.update('<a href="{{url}}">{{name}}</a>', {
						url: '#/test',
						name: 'go to test'
					});
				},
				destruct: function(){
				}
			});
			var TestController = new Zippy.Controller({
				onLoad: function(){
				},
				respond: function(){
					this._window._head.update('title', 'Test');
					this.update('hello!');
				},
				destruct: function(){
				}
			});
			app = new Zippy.App({
				layout: {
					template: 'static/templates/base.mustache',
					context: '#main',
					views: [
						{
							view: new Zippy.View('header','static/templates/header.mustache'),
							data: {
								title: 'Zippy',
								menu: [
									{url: '#/test', name: 'test'},
									{url: '#/hello', name: 'hello'},
									{url: '#/', name: 'home'}
								]
							}
						},
						{
							view: new Zippy.View('footer','static/templates/footer.mustache')
						}
					]
				}
			});
			app.listen({
				'/hello': HelloController,
				'/test' : TestController
			});
		});
		</script>
	</head>
	<body>
	</body>
</html>